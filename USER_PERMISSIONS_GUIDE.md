# üîê –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –ø—Ä–∞–≤–∞–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

## üìã –û–±–∑–æ—Ä —Å–∏—Å—Ç–µ–º—ã –ø—Ä–∞–≤

–í –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ —Å–∏—Å—Ç–µ–º–∞ –ø—Ä–∞–≤ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –Ω–∞ –æ—Å–Ω–æ–≤–µ Telegram User ID. –≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å/—Å–∫—Ä—ã–≤–∞—Ç—å —Ä–∞–∑–ª–∏—á–Ω—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Ä–æ–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.

## üéØ –¢–∏–ø—ã –ø—Ä–∞–≤

### **1. canCreateRequests** (–í—Å–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏)
- ‚úÖ **–ü—Ä–∞–≤–æ:** –°–æ–∑–¥–∞–≤–∞—Ç—å –Ω–æ–≤—ã–µ –∑–∞—è–≤–∫–∏
- üë• **–ö—Ç–æ:** –í—Å–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
- üéØ **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:** –î–æ—Å—Ç—É–ø –∫ —Ñ–æ—Ä–º–µ —Å–æ–∑–¥–∞–Ω–∏—è –∑–∞—è–≤–∫–∏

### **2. canEditRequests** (–†–µ–¥–∞–∫—Ç–æ—Ä—ã)
- ‚úÖ **–ü—Ä–∞–≤–æ:** –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –∑–∞—è–≤–∫–∏
- üë• **–ö—Ç–æ:** –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –∏–∑ —Å–ø–∏—Å–∫–∞ `editorIds`
- üéØ **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:** –ö–Ω–æ–ø–∫–∞ "–ü—Ä–∞–≤–∏—Ç—å" –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è

### **3. canViewAllRequests** (–ü—Ä–æ—Å–º–æ—Ç—Ä—â–∏–∫–∏)
- ‚úÖ **–ü—Ä–∞–≤–æ:** –ü—Ä–æ—Å–º–∞—Ç—Ä–∏–≤–∞—Ç—å –≤—Å–µ –∑–∞—è–≤–∫–∏
- üë• **–ö—Ç–æ:** –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –∏–∑ —Å–ø–∏—Å–∫–∞ `viewerIds`
- üéØ **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:** –î–æ—Å—Ç—É–ø –∫ —Å–ø–∏—Å–∫—É –≤—Å–µ—Ö –∑–∞—è–≤–æ–∫

### **4. isAdmin** (–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—ã)
- ‚úÖ **–ü—Ä–∞–≤–æ:** –ü–æ–ª–Ω—ã–π –¥–æ—Å—Ç—É–ø –∫–æ –≤—Å–µ–º —Ñ—É–Ω–∫—Ü–∏—è–º
- üë• **–ö—Ç–æ:** –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –∏–∑ —Å–ø–∏—Å–∫–∞ `adminIds`
- üéØ **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:** –í—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏ + –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–∏–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

## üîß –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø—Ä–∞–≤

### **–í –∫–æ–¥–µ (src/app/request/page.tsx):**

```javascript
const checkUserPermissions = (telegramId: number) => {
  // –°–ø–∏—Å–æ–∫ –∞–¥–º–∏–Ω–æ–≤
  const adminIds = [237551991, 123456789];
  
  // –°–ø–∏—Å–æ–∫ —Ä–µ–¥–∞–∫—Ç–æ—Ä–æ–≤
  const editorIds = [237551991, 987654321];
  
  // –°–ø–∏—Å–æ–∫ –ø—Ä–æ—Å–º–æ—Ç—Ä—â–∏–∫–æ–≤
  const viewerIds = [237551991, 555666777];
  
  const permissions = {
    canCreateRequests: true, // –í—Å–µ –º–æ–≥—É—Ç —Å–æ–∑–¥–∞–≤–∞—Ç—å
    canEditRequests: editorIds.includes(telegramId),
    canViewAllRequests: viewerIds.includes(telegramId),
    isAdmin: adminIds.includes(telegramId)
  };
  
  setUserPermissions(permissions);
}
```

### **–í –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è (.env.local):**

```env
# –°–ø–∏—Å–∫–∏ ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π (—á–µ—Ä–µ–∑ –∑–∞–ø—è—Ç—É—é)
ADMIN_IDS=237551991,123456789
EDITOR_IDS=237551991,987654321
VIEWER_IDS=237551991,555666777
```

## üí° –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### **1. –£—Å–ª–æ–≤–Ω–æ–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∫–Ω–æ–ø–æ–∫:**

```jsx
{userPermissions.canEditRequests && (
  <Button>–ü—Ä–∞–≤–∏—Ç—å</Button>
)}
```

### **2. –£—Å–ª–æ–≤–Ω–æ–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Ä–∞–∑–¥–µ–ª–æ–≤:**

```jsx
{userPermissions.isAdmin && (
  <div className="admin-panel">
    <h3>–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–∏–≤–Ω–∞—è –ø–∞–Ω–µ–ª—å</h3>
    {/* –ê–¥–º–∏–Ω —Ñ—É–Ω–∫—Ü–∏–∏ */}
  </div>
)}
```

### **3. –£—Å–ª–æ–≤–Ω–æ–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏:**

```jsx
{userPermissions.canViewAllRequests && (
  <Link href="/all-requests">
    <Button>–í—Å–µ –∑–∞—è–≤–∫–∏</Button>
  </Link>
)}
```

### **4. –£—Å–ª–æ–≤–Ω—ã–µ —Å—Ç–∏–ª–∏:**

```jsx
<div className={`request-card ${userPermissions.isAdmin ? 'admin-highlight' : ''}`}>
  {/* –°–æ–¥–µ—Ä–∂–∏–º–æ–µ */}
</div>
```

## üöÄ –†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

### **1. –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–µ –ø—Ä–∞–≤–∞ –∏–∑ API:**

```javascript
const checkUserPermissions = async (telegramId: number) => {
  try {
    const response = await fetch(`/api/user-permissions/${telegramId}`);
    const permissions = await response.json();
    setUserPermissions(permissions);
  } catch (error) {
    // Fallback –∫ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–º –ø—Ä–∞–≤–∞–º
    setDefaultPermissions(telegramId);
  }
}
```

### **2. –ü—Ä–∞–≤–∞ –Ω–∞ –æ—Å–Ω–æ–≤–µ —Ä–æ–ª–µ–π:**

```javascript
const getRolePermissions = (role: string) => {
  const rolePermissions = {
    'admin': { canEditRequests: true, canViewAllRequests: true, isAdmin: true },
    'editor': { canEditRequests: true, canViewAllRequests: false, isAdmin: false },
    'viewer': { canEditRequests: false, canViewAllRequests: true, isAdmin: false },
    'user': { canEditRequests: false, canViewAllRequests: false, isAdmin: false }
  };
  
  return rolePermissions[role] || rolePermissions['user'];
}
```

### **3. –í—Ä–µ–º–µ–Ω–Ω—ã–µ –ø—Ä–∞–≤–∞:**

```javascript
const checkTemporaryPermissions = (telegramId: number) => {
  const now = new Date();
  const temporaryAccess = {
    237551991: { until: new Date('2024-12-31'), permissions: { isAdmin: true } }
  };
  
  if (temporaryAccess[telegramId] && now < temporaryAccess[telegramId].until) {
    return temporaryAccess[telegramId].permissions;
  }
  
  return {};
}
```

## üîç –û—Ç–ª–∞–¥–∫–∞ –ø—Ä–∞–≤

### **–í –∫–æ–Ω—Å–æ–ª–∏ –±—Ä–∞—É–∑–µ—Ä–∞:**

```javascript
// –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ç–µ–∫—É—â–∏–µ –ø—Ä–∞–≤–∞
console.log('–¢–µ–∫—É—â–∏–µ –ø—Ä–∞–≤–∞:', userPermissions);

// –ü—Ä–æ–≤–µ—Ä–∏—Ç—å Telegram ID
console.log('Telegram ID:', window.Telegram?.WebApp?.initDataUnsafe?.user?.id);
```

### **–í –ª–æ–≥–∞—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è:**

```
üîê –ü—Ä–∞–≤–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è: {
  canCreateRequests: true,
  canEditRequests: false,
  canViewAllRequests: true,
  isAdmin: false
}
```

## üì± –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### **–í–∞–∂–Ω—ã–µ –º–æ–º–µ–Ω—Ç—ã:**

1. **–ü—Ä–∞–≤–∞ –ø—Ä–æ–≤–µ—Ä—è—é—Ç—Å—è –Ω–∞ –∫–ª–∏–µ–Ω—Ç–µ** - –¥–ª—è –∫—Ä–∏—Ç–∏—á–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π –Ω—É–∂–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ
2. **ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π** –º–æ–∂–Ω–æ –ø–æ–ª—É—á–∏—Ç—å –∏–∑ Telegram WebApp
3. **–°–ø–∏—Å–∫–∏ –ø—Ä–∞–≤** –ª—É—á—à–µ —Ö—Ä–∞–Ω–∏—Ç—å –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è
4. **–ö—Ä–∏—Ç–∏—á–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏** –¥–æ–ª–∂–Ω—ã –ø—Ä–æ–≤–µ—Ä—è—Ç—å—Å—è –Ω–∞ backend

### **–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:**

- ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø—Ä–∞–≤–∞ –¥–ª—è UX (–ø–æ–∫–∞–∑/—Å–∫—Ä—ã—Ç–∏–µ —ç–ª–µ–º–µ–Ω—Ç–æ–≤)
- ‚ùå –ù–µ –ø–æ–ª–∞–≥–∞–π—Ç–µ—Å—å —Ç–æ–ª—å–∫–æ –Ω–∞ –∫–ª–∏–µ–Ω—Ç—Å–∫–∏–µ –ø—Ä–∞–≤–∞ –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
- ‚úÖ –î—É–±–ª–∏—Ä—É–π—Ç–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ –¥–ª—è –∫—Ä–∏—Ç–∏—á–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π
- ‚úÖ –õ–æ–≥–∏—Ä—É–π—Ç–µ –¥–µ–π—Å—Ç–≤–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π —Å –ø—Ä–∞–≤–∞–º–∏

## üéØ –ì–æ—Ç–æ–≤—ã–µ –ø—Ä–∏–º–µ—Ä—ã

### **–°–∫—Ä—ã—Ç—å –∫–Ω–æ–ø–∫—É "–ü—Ä–∞–≤–∏—Ç—å" –¥–ª—è –æ–±—ã—á–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π:**
```jsx
{userPermissions.canEditRequests && (
  <Button>–ü—Ä–∞–≤–∏—Ç—å</Button>
)}
```

### **–ü–æ–∫–∞–∑–∞—Ç—å –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å —Ç–æ–ª—å–∫–æ –∞–¥–º–∏–Ω–∞–º:**
```jsx
{userPermissions.isAdmin && (
  <AdminPanel />
)}
```

### **–û–≥—Ä–∞–Ω–∏—á–∏—Ç—å –¥–æ—Å—Ç—É–ø –∫ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã–º —à–∞–≥–∞–º:**
```jsx
{userPermissions.canCreateRequests && currentStep <= 6 && (
  <StepContent />
)}
```
