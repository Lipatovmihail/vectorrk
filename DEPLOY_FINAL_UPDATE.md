# üöÄ –§–∏–Ω–∞–ª—å–Ω—ã–π –¥–µ–ø–ª–æ–π –Ω–∞ Vercel - —Å —Ñ—É–Ω–∫—Ü–∏–µ–π —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

## ‚úÖ –ü–æ—Å–ª–µ–¥–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è (9dd0b41)

### üîß **–ù–æ–≤–∞—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å:**

1. **–ü–æ–ª–Ω–∞—è –ª–æ–≥–∏–∫–∞ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∑–∞—è–≤–æ–∫:**
   - –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π —Å `old` –∏ `new` –∑–Ω–∞—á–µ–Ω–∏—è–º–∏
   - –û—Ç–ø—Ä–∞–≤–∫–∞ —Ç–æ–ª—å–∫–æ –∏–∑–º–µ–Ω–µ–Ω–Ω—ã—Ö –ø–æ–ª–µ–π –≤ n8n
   - –£–º–Ω–∞—è –∫–Ω–æ–ø–∫–∞ "–û—Ç–ø—Ä–∞–≤–∏—Ç—å" —Å —Å—á–µ—Ç—á–∏–∫–æ–º –∏–∑–º–µ–Ω–µ–Ω–∏–π
   - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –≤–æ–∑–≤—Ä–∞—Ç –∫ —Å–ø–∏—Å–∫—É –ø–æ—Å–ª–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è

2. **–£–ª—É—á—à–µ–Ω–Ω—ã–π UI —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:**
   - –ó–∞—è–≤–∫–∏ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Ç–µ–ø–µ—Ä—å –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç 4 —Å—Ç—Ä–æ–∫–∏ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ (–∫–∞–∫ –Ω–∞ –≥–ª–∞–≤–Ω–æ–π)
   - –ï–¥–∏–Ω–æ–æ–±—Ä–∞–∑–Ω—ã–π –¥–∏–∑–∞–π–Ω —Å—Ç–∞—Ç—É—Å–æ–≤ —Å –∏–∫–æ–Ω–∫–∞–º–∏
   - –ü—Ä–∞–≤–∏–ª—å–Ω—ã–µ –æ—Ç—Å—Ç—É–ø—ã –º–µ–∂–¥—É –∑–∞—è–≤–∫–∞–º–∏

3. **–û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –Ω–∞–≤–∏–≥–∞—Ü–∏—è:**
   - –ö–Ω–æ–ø–∫–∞ "–û—Ç–º–µ–Ω–∏—Ç—å" –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –Ω–∞ —Å–ø–∏—Å–æ–∫ –∑–∞—è–≤–æ–∫
   - –£–±—Ä–∞–Ω—ã —Å—Å—ã–ª–∫–∏ —Å –∑–∞—è–≤–æ–∫ –Ω–∞ –≥–ª–∞–≤–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü–µ
   - –ü–ª–∞–≤–∞—é—â–µ–µ –º–µ–Ω—é —Å–∫—Ä—ã—Ç–æ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ —Å–æ–∑–¥–∞–Ω–∏—è –∑–∞—è–≤–∫–∏

## üìã **–§–æ—Ä–º–∞—Ç –¥–∞–Ω–Ω—ã—Ö n8n (–ø–æ–ª–Ω—ã–π —Å–ø–∏—Å–æ–∫)**

### 1. –ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ (`mode: "main"`):
```json
{
  "page": "main",
  "mode": "main", 
  "telegram_id": 123456789,
  "initData": "...",
  "telegram_user": { ... },
  "timestamp": "2024-12-20T12:00:00.000Z"
}
```

**–û—Ç–≤–µ—Ç:**
```json
{
  "success": true,
  "requests": [
    {
      "id": 1,
      "object_name": "–ñ–ö \"–°–æ–ª–Ω–µ—á–Ω—ã–π\"",
      "order_number": "–ù–ó 545/204",
      "object_address": "—É–ª. –°–æ–ª–Ω–µ—á–Ω–∞—è, 15", 
      "delivery_datetime": "2024-12-20 14:00:00",
      "status": "–í —Ä–∞–±–æ—Ç–µ"
    }
  ],
  "editableCount": 5
}
```

### 2. –°–æ–∑–¥–∞–Ω–∏–µ –∑–∞—è–≤–∫–∏ (`mode: "create"`):
```json
{
  "page": "request",
  "mode": "create",
  "telegram_id": 123456789,
  "initData": "...",
  "telegram_user": { ... },
  "timestamp": "2024-12-20T12:00:00.000Z",
  "formData": {
    "order_number": "–ù–ó 545/204",
    "object_name": "–ñ–ö \"–°–æ–ª–Ω–µ—á–Ω—ã–π\"",
    "object_address": "—É–ª. –°–æ–ª–Ω–µ—á–Ω–∞—è, 15",
    "materials": "–ú–∞—Ç–µ—Ä–∏–∞–ª—ã...",
    "delivery_date": "2024-12-20",
    "delivery_time": "14:00",
    "contact_name": "–ò–≤–∞–Ω–æ–≤ –ò.–ò.",
    "contact_phone": "+7 (900) 123-45-67",
    "additional_info": "–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è"
  },
  "telegramFiles": [
    {
      "file_id": "BAADBAADrwADBREAAYag...",
      "file_unique_id": "AgADrwADBREAAYag"
    }
  ]
}
```

### 3. –°–ø–∏—Å–æ–∫ –¥–ª—è —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è (`mode: "editlist"`):
```json
{
  "page": "edit",
  "mode": "editlist",
  "telegram_id": 123456789,
  "initData": "...",
  "telegram_user": { ... },
  "timestamp": "2024-12-20T12:00:00.000Z"
}
```

**–û—Ç–≤–µ—Ç:**
```json
[
  {
    "success": true,
    "total": 2,
    "data": [
      {
        "id_fact": 29,
        "object_name": "–ò–∑–≥–æ—Ç–æ–≤–ª–µ–Ω–∏–µ –∏ –º–æ–Ω—Ç–∞–∂ –≤–æ—Ä–æ—Ç",
        "order_number": "–ù–ó 562/2024",
        "object_address": "–ó–∞–π—Ü–µ–≤–∞",
        "delivery_datetime": "2024-10-31 12:44:00", 
        "status": "–°–æ–∑–¥–∞–Ω–∞",
        "materials": "–ú–∞—Ç–µ—Ä–∏–∞–ª—ã\n1. –©–∏—Ç (2050400012) - 1 —à—Ç..."
      }
    ]
  }
]
```

### 4. **–ù–û–í–û–ï:** –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∑–∞—è–≤–∫–∏ (`mode: "update"`):
```json
{
  "page": "edit",
  "mode": "update",
  "id_fact": 29,
  "changes": {
    "object_name": {
      "old": "–ò–∑–≥–æ—Ç–æ–≤–ª–µ–Ω–∏–µ –∏ –º–æ–Ω—Ç–∞–∂ –≤–æ—Ä–æ—Ç",
      "new": "–ò–∑–≥–æ—Ç–æ–≤–ª–µ–Ω–∏–µ –∏ –º–æ–Ω—Ç–∞–∂ –≤–æ—Ä–æ—Ç (–æ–±–Ω–æ–≤–ª–µ–Ω–æ)"
    },
    "materials": {
      "old": "–ú–∞—Ç–µ—Ä–∏–∞–ª—ã\n1. –©–∏—Ç (2050400012) - 1 —à—Ç",
      "new": "–ú–∞—Ç–µ—Ä–∏–∞–ª—ã\n1. –©–∏—Ç (2050400012) - 1 —à—Ç\n2. –ù–æ–≤—ã–π –º–∞—Ç–µ—Ä–∏–∞–ª"
    },
    "delivery_date": {
      "old": "2024-10-31",
      "new": "2024-11-01"
    }
  },
  "telegram_id": 123456789,
  "initData": "...",
  "telegram_user": { ... },
  "timestamp": "2024-12-20T12:00:00.000Z"
}
```

**–û—Ç–≤–µ—Ç:**
```json
{
  "success": true,
  "message": "–ò–∑–º–µ–Ω–µ–Ω–∏—è —É—Å–ø–µ—à–Ω–æ —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã",
  "updated_fields": ["object_name", "materials", "delivery_date"]
}
```

### 5. –ê–Ω–∞–ª–∏—Ç–∏–∫–∞ (`mode: "allorder"`):
```json
{
  "page": "analytics",
  "mode": "allorder",
  "telegram_id": 123456789,
  "initData": "...",
  "telegram_user": { ... },
  "timestamp": "2024-12-20T12:00:00.000Z"
}
```

## üåê **–ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ –¥–µ–ø–ª–æ—é –Ω–∞ Vercel**

### –®–∞–≥ 1: Vercel Dashboard
1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ [vercel.com](https://vercel.com)
2. –í–æ–π–¥–∏—Ç–µ —á–µ—Ä–µ–∑ GitHub
3. **"Add New..." ‚Üí "Project"**
4. –í—ã–±–µ—Ä–∏—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π `Lipatovmihail/vectorrk`

### –®–∞–≥ 2: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞
- **Framework Preset**: Next.js ‚úÖ
- **Root Directory**: `vector` ‚úÖ
- **Build Command**: `npm run build` ‚úÖ
- **Output Directory**: `.next` ‚úÖ

### –®–∞–≥ 3: Environment Variables
```
TELEGRAM_BOT_TOKEN=–í–ê–®_–¢–û–ö–ï–ù_–û–¢_BOTFATHER
TELEGRAM_CHAT_ID=-1003083346855
```

**–í–∞–∂–Ω–æ:** –î–æ—Å—Ç—É–ø–Ω–æ –¥–ª—è Production, Preview, Development

### –®–∞–≥ 4: Deploy
–ù–∞–∂–º–∏—Ç–µ **"Deploy"** –∏ –¥–æ–∂–¥–∏—Ç–µ—Å—å –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è.

## üéØ **–ü–æ–ª–Ω—ã–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è:**

### ‚úÖ –ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ (`/`)
- –ó–∞–≥—Ä—É–∑–∫–∞ –∑–∞—è–≤–æ–∫ –∏–∑ n8n (`mode: "main"`)
- –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ —Å—Ç–∞—Ç—É—Å–∞–º: –í—Å–µ / –°–æ–∑–¥–∞–Ω–∞ / –í —Ä–∞–±–æ—Ç–µ / –ì–æ—Ç–æ–≤–∞
- **–ó–∞—è–≤–∫–∏ —Ç–æ–ª—å–∫–æ –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞** (–Ω–µ –∫–ª–∏–∫–∞–±–µ–ª—å–Ω—ã)
- –û—Ç—Å—Ç—É–ø—ã –º–µ–∂–¥—É –∑–∞—è–≤–∫–∞–º–∏ —Ä–∞–±–æ—Ç–∞—é—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- –ü–ª–∞–≤–∞—é—â–µ–µ –º–µ–Ω—é –Ω–∞–≤–∏–≥–∞—Ü–∏–∏

### ‚úÖ –°—Ç—Ä–∞–Ω–∏—Ü–∞ —Å–æ–∑–¥–∞–Ω–∏—è –∑–∞—è–≤–∫–∏ (`/request`)
- 6 —à–∞–≥–æ–≤ —Å–æ–∑–¥–∞–Ω–∏—è –∑–∞—è–≤–∫–∏
- –ó–∞–≥—Ä—É–∑–∫–∞ —Ñ–æ—Ç–æ —á–µ—Ä–µ–∑ Telegram Bot API
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–∂–∞—Ç–∏–µ —Ñ–æ—Ç–æ >2MB
- –û—Ç–ø—Ä–∞–≤–∫–∞ –≤ n8n (`mode: "create"`)
- **–ü–ª–∞–≤–∞—é—â–µ–µ –º–µ–Ω—é —Å–∫—Ä—ã—Ç–æ** (–Ω–µ –º–µ—à–∞–µ—Ç –∫–Ω–æ–ø–∫–∞–º)

### ‚úÖ –°—Ç—Ä–∞–Ω–∏—Ü–∞ –∞–Ω–∞–ª–∏—Ç–∏–∫–∏ (`/analytics`)
- –ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö –∏–∑ n8n (`mode: "allorder"`)
- Bar Chart –∏ Donut Chart
- –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–µ –ø–µ—Ä–∏–æ–¥—ã
- –ü–ª–∞–≤–∞—é—â–µ–µ –º–µ–Ω—é –Ω–∞–≤–∏–≥–∞—Ü–∏–∏

### ‚úÖ –°—Ç—Ä–∞–Ω–∏—Ü–∞ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è (`/edit`)
- –ó–∞–≥—Ä—É–∑–∫–∞ —Å–ø–∏—Å–∫–∞ –∑–∞—è–≤–æ–∫ (`mode: "editlist"`)
- **–£–ø—Ä–æ—â–µ–Ω–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç –¥–∞–Ω–Ω—ã—Ö** (–±–µ–∑ step1-step6)
- **4 —Å—Ç—Ä–æ–∫–∏ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏** –≤ –∫–∞–∂–¥–æ–π –∑–∞—è–≤–∫–µ (–∫–∞–∫ –Ω–∞ –≥–ª–∞–≤–Ω–æ–π)
- **–ü–æ–ª–Ω–∞—è –ª–æ–≥–∏–∫–∞ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:**
  - –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π —Å old/new –∑–Ω–∞—á–µ–Ω–∏—è–º–∏
  - –û—Ç–ø—Ä–∞–≤–∫–∞ —Ç–æ–ª—å–∫–æ –∏–∑–º–µ–Ω–µ–Ω–Ω—ã—Ö –ø–æ–ª–µ–π (`mode: "update"`)
  - –£–º–Ω–∞—è –∫–Ω–æ–ø–∫–∞ "–û—Ç–ø—Ä–∞–≤–∏—Ç—å" —Å —Å—á–µ—Ç—á–∏–∫–æ–º –∏–∑–º–µ–Ω–µ–Ω–∏–π
  - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –≤–æ–∑–≤—Ä–∞—Ç –∫ —Å–ø–∏—Å–∫—É –ø–æ—Å–ª–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è
- Toast —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è—Ö
- –ü–ª–∞–≤–∞—é—â–µ–µ –º–µ–Ω—é –Ω–∞–≤–∏–≥–∞—Ü–∏–∏

## üîÑ **Webhook endpoints:**

```
https://n8nunit.miaai.ru/webhook/f760ae2e-d95f-4f48-9134-c60aa408372b
```

### –†–µ–∂–∏–º—ã (`mode`):
- `"main"` - –≥–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞
- `"create"` - —Å–æ–∑–¥–∞–Ω–∏–µ –∑–∞—è–≤–∫–∏  
- `"allorder"` - –∞–Ω–∞–ª–∏—Ç–∏–∫–∞
- `"editlist"` - —Å–ø–∏—Å–æ–∫ –¥–ª—è —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
- `"update"` - **–ù–û–í–û–ï:** –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∑–∞—è–≤–∫–∏

## üì± **Telegram WebApp –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**

- ‚úÖ –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω—ã–π fullscreen
- ‚úÖ –ë–µ–∑–æ–ø–∞—Å–Ω–∞—è –∑–æ–Ω–∞ –¥–ª—è iPhone notch
- ‚úÖ –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –∑–∞–∫—Ä—ã—Ç–∏—è
- ‚úÖ –û—Ç–ø—Ä–∞–≤–∫–∞ `file_id` –≤–º–µ—Å—Ç–æ blob URLs
- ‚úÖ Sonner toast notifications
- ‚úÖ **–û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π** –≤ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏

## üõ† **–†–∞–∑—Ä–µ—à–µ–Ω–∏—è:**
–¢–æ–ª—å–∫–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å ID **`1056703690`** –º–æ–∂–µ—Ç —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –∑–∞—è–≤–∫–∏.

## üìä **Commit Hash: `9dd0b41`**

```
–î–æ–±–∞–≤–∏–ª –ª–æ–≥–∏–∫—É –æ—Ç–ø—Ä–∞–≤–∫–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–π –≤ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏ –∑–∞—è–≤–æ–∫ 
—Å –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ–º old/new –∑–Ω–∞—á–µ–Ω–∏–π
```

## üéâ **–ì–æ—Ç–æ–≤–æ –∫ –¥–µ–ø–ª–æ—é!**

### –ü–æ—Å–ª–µ –¥–µ–ø–ª–æ—è –ø—Ä–æ–≤–µ—Ä—å—Ç–µ:
1. ‚úÖ –í—Å–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã
2. ‚úÖ –ó–∞–≥—Ä—É–∑–∫–∞ —Ñ–æ—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç
3. ‚úÖ –û—Ç–ø—Ä–∞–≤–∫–∞ –¥–∞–Ω–Ω—ã—Ö –≤ n8n —Ä–∞–±–æ—Ç–∞–µ—Ç
4. ‚úÖ **–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞—è–≤–æ–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç**
5. ‚úÖ **–û—Ç–ø—Ä–∞–≤–∫–∞ –∏–∑–º–µ–Ω–µ–Ω–∏–π —Ä–∞–±–æ—Ç–∞–µ—Ç**
6. ‚úÖ –û—Ç—Å—Ç—É–ø—ã –º–µ–∂–¥—É –∑–∞—è–≤–∫–∞–º–∏ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–µ
7. ‚úÖ –ù–∞–≤–∏–≥–∞—Ü–∏—è —Ä–∞–±–æ—Ç–∞–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω–æ

### üöÄ **–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ –Ω–æ–≤–æ–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏:**
- **–≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–∞—è –æ—Ç–ø—Ä–∞–≤–∫–∞:** —Ç–æ–ª—å–∫–æ –∏–∑–º–µ–Ω–µ–Ω–Ω—ã–µ –ø–æ–ª—è
- **–î–µ—Ç–∞–ª—å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ:** old/new –∑–Ω–∞—á–µ–Ω–∏—è –¥–ª—è –∞—É–¥–∏—Ç–∞
- **–£–º–Ω—ã–π UI:** —Å—á–µ—Ç—á–∏–∫ –∏–∑–º–µ–Ω–µ–Ω–∏–π –Ω–∞ –∫–Ω–æ–ø–∫–µ
- **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –Ω–∞–≤–∏–≥–∞—Ü–∏—è:** –≤–æ–∑–≤—Ä–∞—Ç –∫ —Å–ø–∏—Å–∫—É –ø–æ—Å–ª–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è

**–£–¥–∞—á–∏ —Å –¥–µ–ø–ª–æ–µ–º!** üéâ
